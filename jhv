def feedback_agent_node(state: WorkflowState) -> WorkflowState:
    logging.info("Calling FeedbackAgent")
    user_feedback = state.get("issue_text")
    if not user_feedback or not isinstance(user_feedback, dict) or not user_feedback.get("issue_text"):
        logging.info("No explicit user feedback provided, skipping FeedbackAgent.")
        return state
    issue_text = user_feedback.get("issue_text")
    rating = user_feedback.get("rating", 1)
    payload = {
        "username": state["username"],
        "issue_text": issue_text,
        "rating": rating,
        "mobile": state.get("mobile", "")
    }
    result = agent_post(AGENT_ENDPOINTS["feedback"], "/submit-feedback", state=state, json=payload)
    state['feedback_data'] = result
    return state
